
<!doctype html>
<html class="theme-next use-motion theme-next-mala">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="醉卧塌上看风轻云淡，漫卷诗书听雨打芭蕉" />



  <meta name="keywords" content="Android,Gradle,Android Studio,Eclipse," />



  <link rel="alternate" href="/atom.xml" title="Robin's blog" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="前言  之前，组内有一个 Android 项目，由于历史原因，一直是在 Eclipse 上开发的。最近，要对项目进行全面更新。首先，就是要把项目从 Eclipse 上移到 Android Studio（下面都简称 AS） 上来。这两天，我负责把项目进行转换的工作，该项目依赖的 lib 工程比较多，虽然之前下面也在用 AS，但是都是全过程的再用，从新建项目到调试发布，没有转过，过程中还是遇到">
<meta name="keywords" content="Android,Gradle,Android Studio,Eclipse">
<meta property="og:type" content="article">
<meta property="og:title" content="Eclipse项目转Android Studio碰到的一些问题">
<meta property="og:url" content="http://whtacm.cc/2016/11/02/Eclipse项目转Android-Studio的一些问题/index.html">
<meta property="og:site_name" content="Robin&#39;s blog">
<meta property="og:description" content="前言  之前，组内有一个 Android 项目，由于历史原因，一直是在 Eclipse 上开发的。最近，要对项目进行全面更新。首先，就是要把项目从 Eclipse 上移到 Android Studio（下面都简称 AS） 上来。这两天，我负责把项目进行转换的工作，该项目依赖的 lib 工程比较多，虽然之前下面也在用 AS，但是都是全过程的再用，从新建项目到调试发布，没有转过，过程中还是遇到">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/preface.png">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/steps-1.png">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/steps-2.png">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/steps-3.png">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/steps-4.png">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/ori-add.png">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/lib-add.png">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/as.jpg">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/as-project-structure.png">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/as-gradle-building.png">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/png-err.png">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/jar-module.png">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/dependencies.png">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/upload-task.png">
<meta property="og:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/gradle-tasks.png">
<meta property="og:updated_time" content="2018-04-11T13:55:11.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Eclipse项目转Android Studio碰到的一些问题">
<meta name="twitter:description" content="前言  之前，组内有一个 Android 项目，由于历史原因，一直是在 Eclipse 上开发的。最近，要对项目进行全面更新。首先，就是要把项目从 Eclipse 上移到 Android Studio（下面都简称 AS） 上来。这两天，我负责把项目进行转换的工作，该项目依赖的 lib 工程比较多，虽然之前下面也在用 AS，但是都是全过程的再用，从新建项目到调试发布，没有转过，过程中还是遇到">
<meta name="twitter:image" content="http://ofdub8np7.bkt.clouddn.com/2016/11/02/preface.png">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mala',
    sidebar: '[object Object]'
  };
</script>

  <title> Eclipse项目转Android Studio碰到的一些问题 | Robin's blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  

  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?97551011862ccb1d84eef0bd7737cfc3";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">人淡如菊</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            <i class="menu-item-icon icon-next-about"></i> <br />
            关于
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    
      

      

    

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              Eclipse项目转Android Studio碰到的一些问题
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2016-11-02T14:07:28+08:00" content="2016-11-02">
            2016-11-02
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/Android-Studio/" itemprop="url" rel="index">
                  <span itemprop="name">Android Studio</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <!--
              <a href="/2016/11/02/Eclipse项目转Android-Studio的一些问题/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/02/Eclipse项目转Android-Studio的一些问题/" itemprop="commentsCount"></span>
              </a>
              -->
              <a href="/2016/11/02/Eclipse项目转Android-Studio的一些问题/#comments" itemprop="discussionUrl">
                <span>评论</span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><p><em><p align=""> <img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/preface.png" alt=""> </p></em></p>
<blockquote>
<p>前言</p>
</blockquote>
<p>之前，组内有一个 Android 项目，由于历史原因，一直是在 <code>Eclipse</code> 上开发的。最近，要对项目进行全面更新。首先，就是要把项目从 Eclipse 上移到 <code>Android Studio（下面都简称 AS）</code> 上来。这两天，我负责把项目进行转换的工作，该项目依赖的 <em>lib</em> 工程比较多，虽然之前下面也在用 <code>AS</code>，但是都是全过程的再用，从新建项目到调试发布，没有转过，过程中还是遇到了一些蛋疼琐碎的问题，然后就想把这些问题和解决方法放在一起。<code>如果能帮到你，荣幸之至</code>。</p>
<a id="more"></a>
<p>从 Eclipse 导出项目到导入 AS，我会用自己的示例来大概演示一下，后面会放上实际项目迁移过程中遇到的问题和解决方法。<br><br></p>
<h1 id="1、Eclipse导出项目"><a href="#1、Eclipse导出项目" class="headerlink" title="1、Eclipse导出项目"></a>1、Eclipse导出项目</h1><p><br></p>
<ul>
<li>在 <code>Eclipse</code> 中打开你的项目，然后 <em>File -&gt; Export</em> 或者在右键菜单中找到 <em>Export</em> ，打开导出项目弹出框。如下图，选中 <em>Generate Gradle build files</em>，点击 <em>Next</em>。</li>
</ul>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/steps-1.png" alt=""></p>
<ul>
<li>直接点击 <em>Next</em>，进入下一步操作</li>
</ul>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/steps-2.png" alt=""></p>
<ul>
<li>在该界面选择你要生成 <em>Gradle build files</em> 的项目，包括主工程和 <em>lib</em> 工程，选中后，直接点击 <em>Next</em></li>
</ul>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/steps-3.png" alt=""></p>
<ul>
<li>在这一步，勾选覆盖已有文件这一项，点击 <em>Finish</em>，完成生成</li>
</ul>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/steps-4.png" alt=""></p>
<p><br></p>
<h1 id="2、导入Android-Studio"><a href="#2、导入Android-Studio" class="headerlink" title="2、导入Android Studio"></a>2、导入Android Studio</h1><p><br><br>完成上面的步骤，在导入 <code>AS</code> 之前，我们来看一下都生成了什么东西，在工程目录外层生成了如下文件，见下图。 <code>build.gradle</code> 是属于 Project （项目）的文件，<code>gradle</code> 文件夹下面描述了所用的 Gradle 信息。</p>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/ori-add.png" alt=""></p>
<p>而刷新 Eclipse 项目，在每个工程中，可以看到增加了一个 <code>build.gradle</code> 文件，如下图。</p>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/lib-add.png" alt=""></p>
<p>接下来，我们就需要把项目导入 <code>AS</code> 了。打开你的 <code>AS</code>，选择下图中的选项</p>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/as.jpg" alt=""></p>
<p>然后我们可以从下图中看到整个项目的目录结构，基本上每个工程的目录结构和在  Eclipse 中是一样的结构，这和你通过 AS 去新建一个项目是不一样的，但这并不妨碍我们。</p>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/as-project-structure.png" alt=""></p>
<p><em><code>Note： 这里强烈建议先参照问题列表里的第一个问题，先修改Gradle 和 Android Plugin 版本后（也就是修改上图中 1 和 2 两个文件），再导入，省去不少麻烦</code></em></p>
<p><br></p>
<h1 id="3、问题列表（Issue-list）"><a href="#3、问题列表（Issue-list）" class="headerlink" title="3、问题列表（Issue list）"></a>3、问题列表（Issue list）</h1><p><br><br>项目导入<code>Android Studio</code>后，一般总会问题多多，就本项目为例，大概有下面几个。。。。而且有的问题会反复出现，改到想哭。。。。</p>
<p><code>PS： 所有报错信息中的路径和名称类似的都用 {.....} 或者 ‘xxxx’ 代替，具体每个人的项目路径和名称都不一样，到时候涉及到这些的时候，还需要具体对待</code><br><br></p>
<h2 id="3-1、Gradle-和-Android-Plugin-版本"><a href="#3-1、Gradle-和-Android-Plugin-版本" class="headerlink" title="3.1、Gradle 和 Android Plugin 版本"></a>3.1、Gradle 和 Android Plugin 版本</h2><p><br><br>通过 Eclipse 导出的项目，因为 adt 的原因，默认的 <em>Gradle</em> 和 <em>Android Plugin</em> 版本都比较低，需要提升下版本。但是，因为伟大的<code>墙</code>的存在，可能会下载不下来（出现下图的情况，一直停留在building）。</p>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/as-gradle-building.png" alt=""></p>
<p>这种情况，如果你没有翻墙的话，你可以改成你本机上 <code>Android Studio</code> 上已经成功运行项目中使用的 <em>Gradle</em> 和 <em>Android Plugin</em> 版本，<em>Gradle</em> 版本修改在项目的根目录下的 <code>gradle/wrapper/gradle-wrapper.properties</code> 文件中，打开已成功运行的项目中的该文件可以看到类似内容<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#Mon Nov 30 13:15:11 EET 2015</span></div><div class="line"><span class="attr">distributionBase</span>=GRADLE_USER_HOME</div><div class="line"><span class="attr">distributionPath</span>=wrapper/dists</div><div class="line"><span class="attr">zipStoreBase</span>=GRADLE_USER_HOME</div><div class="line"><span class="attr">zipStorePath</span>=wrapper/dists</div><div class="line"><span class="attr">distributionUrl</span>=https\://services.gradle.org/distributions/gradle-<span class="number">2.10</span>-all.zip</div></pre></td></tr></table></figure></p>
<p>最后一行就是<em>Gradle</em> 版本，把刚刚导入的项目 <em>Gradle</em> 版本替换成这个版本。仅仅是这样，项目还可能不能好好的编译，有可能遇到下面两个问题：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt; Could not resolve all dependencies <span class="keyword">for</span> configuration <span class="string">':classpath'</span>.</div><div class="line">   &gt; Could not resolve com<span class="selector-class">.android</span><span class="selector-class">.tools</span><span class="selector-class">.build</span>:gradle:<span class="number">0.12</span>.+.</div><div class="line">     Required by:</div><div class="line">         :client<span class="selector-class">.android</span><span class="selector-class">.studio</span>:unspecified</div><div class="line">      &gt; ...</div></pre></td></tr></table></figure></p>
<p>，或者<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt; Could not resolve all dependencies <span class="keyword">for</span> configuration <span class="string">':classpath'</span>.</div><div class="line">   &gt; Could not resolve com<span class="selector-class">.android</span><span class="selector-class">.tools</span><span class="selector-class">.build</span>:gradle:<span class="number">0.12</span>.+.</div><div class="line">     Required by:</div><div class="line">         :client<span class="selector-class">.android</span><span class="selector-class">.studio</span>:unspecified</div><div class="line">      &gt; No cached version of com<span class="selector-class">.android</span><span class="selector-class">.tools</span><span class="selector-class">.build</span>:gradle:<span class="number">0.12</span>.+. available <span class="keyword">for</span> offline mode.</div></pre></td></tr></table></figure></p>
<p>都是找不到该 <em>Android Plugin</em> 版本，前者是联网下载不到报错，后者是在设置成 <code>Offline work</code> 时找不到本地版本报错信息。我们也可以改成成功运行的项目的 <em>Android Plugin</em> 版本，这个版本设置在整个项目根目录下的 <code>build.gradle</code> 文件中, 修改 <code>classpath</code> 这一行最后的版本。<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">buildscript</span> &#123;</div><div class="line">    <span class="keyword">repositories</span> &#123;</div><div class="line">        mavenCentral()</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">dependencies</span> &#123;</div><div class="line">        <span class="keyword">classpath</span> <span class="string">'com.android.tools.build:gradle:0.12.+'</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">.......</div></pre></td></tr></table></figure></p>
<p><br></p>
<h2 id="3-2、配置合适的-buildToolsVersion"><a href="#3-2、配置合适的-buildToolsVersion" class="headerlink" title="3.2、配置合适的 buildToolsVersion"></a>3.2、配置合适的 buildToolsVersion</h2><p><br><br><code>Eclipse</code> 为项目中每个工程单独生成一个 <code>build.gradle</code> 文件，这个文件包括以下内容（里面加了一些注释信息）：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 指示是主工程还是 Module，这个自动生成的值已经被废弃了，</span></div><div class="line"><span class="comment">// 主工程要替换为'com.android.application'，</span></div><div class="line"><span class="comment">// 其他的要替换为'com.android.library'</span></div><div class="line"><span class="comment">// 这里'android'表示是主工程</span></div><div class="line"></div><div class="line">apply plugin: <span class="string">'android'</span></div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">	<span class="comment">// 引用的 jar 包和位置</span></div><div class="line">    compile fileTree(dir: <span class="string">'libs'</span>, include: <span class="string">'*.jar'</span>)</div><div class="line">	<span class="comment">// 引用的 Module</span></div><div class="line">    compile project(<span class="string">':library'</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line">android &#123;</div><div class="line">	<span class="comment">// sdk 版本</span></div><div class="line">    compileSdkVersion <span class="number">21</span></div><div class="line">	<span class="comment">// buildTools 版本</span></div><div class="line">    buildToolsVersion <span class="string">"25.0.0"</span></div><div class="line"></div><div class="line">	<span class="comment">// 代码和资源文件目录</span></div><div class="line">    sourceSets &#123;</div><div class="line">        main &#123;</div><div class="line">            manifest<span class="selector-class">.srcFile</span> <span class="string">'AndroidManifest.xml'</span></div><div class="line">            java<span class="selector-class">.srcDirs</span> = [<span class="string">'src'</span>]</div><div class="line">            resources<span class="selector-class">.srcDirs</span> = [<span class="string">'src'</span>]</div><div class="line">            aidl<span class="selector-class">.srcDirs</span> = [<span class="string">'src'</span>]</div><div class="line">            renderscript<span class="selector-class">.srcDirs</span> = [<span class="string">'src'</span>]</div><div class="line">            res<span class="selector-class">.srcDirs</span> = [<span class="string">'res'</span>]</div><div class="line">            assets<span class="selector-class">.srcDirs</span> = [<span class="string">'assets'</span>]</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Move the tests to tests/java, tests/res, etc...</span></div><div class="line">        instrumentTest.setRoot(<span class="string">'tests'</span>)</div><div class="line"></div><div class="line">        <span class="comment">// Move the build types to ...</span></div><div class="line">        debug.setRoot(<span class="string">'build-types/debug'</span>)</div><div class="line">        release.setRoot(<span class="string">'build-types/release'</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>其中，<code>buildToolsVersion &quot;25.0.0&quot;</code> 是 ADT 为你生成时设置的，一定要结合你使用的 JDK 版本改成适合的 buildTools 版本，比如，我用的 JDK1.7，就会报下面的错误。<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">Error:</span>java.lang.<span class="string">UnsupportedClassVersionError:</span> com<span class="regexp">/android/</span>dx<span class="regexp">/command/</span><span class="string">Main :</span> Unsupported major.minor version <span class="number">52.0</span></div></pre></td></tr></table></figure></p>
<p><br></p>
<h2 id="3-3、找不到-Java-类"><a href="#3-3、找不到-Java-类" class="headerlink" title="3.3、找不到 Java 类"></a>3.3、找不到 Java 类</h2><p><br><br>下面的这个信息是因为某个 Module 中使用到了 <code>sun.misc.BASE64Encoder</code> 类，而在 Eclipse 的项目中，加入了 <em>JRE System Library</em>（其中的 rt.jar 包含 <code>sun.misc.BASE64Encoder</code> 类），在 AS 中也引用到了 <code>rt.jar</code>，但没有这这一块的代码。去网上找到需要的jar包（不建议直接使用安装的 jdk 目录下面的 rt.jar，因为实在是太大啦。居然有 60+M。。。）放到 Module 下的 libs 下 sync 下项目就行了。<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&#123;....&#125;</span>/<span class="type">Basic64Util</span>.java:<span class="number">7</span>: error: package sun.misc does <span class="keyword">not</span> exist</div><div class="line"><span class="keyword">import</span> sun.misc.<span class="type">BASE64Encoder</span>;</div><div class="line">               ^</div></pre></td></tr></table></figure></p>
<p><br></p>
<h2 id="3-4、AndroidManifest-xml-文件合并"><a href="#3-4、AndroidManifest-xml-文件合并" class="headerlink" title="3.4、AndroidManifest.xml 文件合并"></a>3.4、AndroidManifest.xml 文件合并</h2><p><br><br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&#123;....&#125;</span>/<span class="type">AndroidManifest</span>.xml:<span class="number">70</span>:<span class="number">9</span>-<span class="number">39</span> <span class="type">Error</span>:</div><div class="line"><span class="type">Attribute</span> application@theme value=(@style/<span class="type">MyTheme</span>) <span class="keyword">from</span> <span class="type">AndroidManifest</span>.xml:<span class="number">70</span>:<span class="number">9</span>-<span class="number">39</span></div><div class="line"><span class="keyword">is</span> also present at [<span class="meta">&#123;....&#125;</span>:unspecified] <span class="type">AndroidManifest</span>.xml:<span class="number">27</span>:<span class="number">9</span>-<span class="number">40</span> value=(@style/<span class="type">AppTheme</span>).</div><div class="line"><span class="type">Suggestion</span>: add 'tools:replace=<span class="string">"android:theme"</span>' to &lt;application&gt; element at <span class="type">AndroidManifest</span>.xml:<span class="number">65</span>:<span class="number">5</span>-<span class="number">465</span>:<span class="number">19</span> to override.</div><div class="line"></div><div class="line"><span class="type">See</span> http://g.co/androidstudio/manifest-merger <span class="keyword">for</span> more information about the manifest merger.</div><div class="line"></div><div class="line">:<span class="meta">&#123;....&#125;</span>:processDebugManifest <span class="type">FAILED</span></div></pre></td></tr></table></figure></p>
<p>项目原来在 Eclipse 中时，每个 lib 工程一开始都是个可以单独运行的 App，每个都带有一个完整的 AndroidManifest.xml 文件（即都有入口的 Activity）。在 Eclipse 中打包 <em>apk</em> 时，以主工程的  AndroidManifest.xml 为准，即所有的 Activity、Service 等都要在主工程中注册，lib 工程的 AndroidManifest.xml 会被忽略掉。<code>AS</code>这边似乎是对所有的 Module 的 AndroidManifest.xml 进行了合并处理，这边运行直接报错。解决方法是打开主工程的  AndroidManifest.xml 文件，在<em>manifest</em> 节点增加：</p>
<blockquote>
<p>xmlns:tools=”<a href="http://schemas.android.com/tools" target="_blank" rel="external">http://schemas.android.com/tools</a>“</p>
</blockquote>
<p>在<em>application</em> 节点中增加：</p>
<blockquote>
<p>tools:replace=”android:theme”</p>
</blockquote>
<p>这里可以一次添加多个属性，用<em>,</em> 分割。例如<em>tools:replace=”android:theme, android:icon, android:label”</em>。</p>
<p>后来，程序发现了一个问题，就是安装<em>apk</em> 后，出现了多个 App 图标，把除主工程之外的所有 lib 工程中的 AndroidManifest.xml 中的那些入口 Activity 都去掉。<br><br></p>
<h2 id="3-5、-9-资源文件"><a href="#3-5、-9-资源文件" class="headerlink" title="3.5、.9 资源文件"></a>3.5、.9 资源文件</h2><p><br><br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">:<span class="meta">&#123;....&#125;</span>:bundleDebugAAPT err(<span class="type">Facade</span> <span class="keyword">for</span> <span class="number">304835512</span>) : <span class="type">No</span> <span class="type">Delegate</span> <span class="built_in">set</span> : lost message:<span class="type">ERROR</span>: <span class="number">9</span>-patch image <span class="meta">&#123;....&#125;</span>/build/intermediates/bundles/debug/res/drawable-hdpi-v4/skin_common_btn_red_unpressed.<span class="number">9</span>.png malformed.</div><div class="line"><span class="type">AAPT</span> err(<span class="type">Facade</span> <span class="keyword">for</span> <span class="number">304835512</span>) : <span class="type">No</span> <span class="type">Delegate</span> <span class="built_in">set</span> : lost message:       <span class="type">Frame</span> pixels must be either solid <span class="keyword">or</span> transparent (<span class="keyword">not</span> intermediate alphas).</div><div class="line"><span class="type">AAPT</span> err(<span class="type">Facade</span> <span class="keyword">for</span> <span class="number">304835512</span>) : <span class="type">No</span> <span class="type">Delegate</span> <span class="built_in">set</span> : lost message:       <span class="type">Found</span> at pixel <span class="comment">#1 along top edge.</span></div><div class="line">....</div></pre></td></tr></table></figure></p>
<p>这个问题比较蛋疼， Eclipse 转 AS 的时候报出了很多这种问题，主要原因是 <em>.9</em> 文件不符合 AS 的规范，但是在  Eclipse 可以使用（比如，有的<em>.9</em> 图片，拉伸部分，就是那道黑线没出来，可以在 AS 中打开该图片进行操作），但是大多数的时候都是没办法，只能找你们的 UI 重新画。。。这也是我遇到的问题里，唯一是单靠程序猿自己不一定能搞定的事情，当然有特长的除外啦。<br><br></p>
<h2 id="3-6、-PNG-资源文件"><a href="#3-6、-PNG-资源文件" class="headerlink" title="3.6、 PNG 资源文件"></a>3.6、 PNG 资源文件</h2><p><br><br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">:<span class="meta">&#123;....&#125;</span>:mergeDebugAndroidTestResourcesAAPT err(<span class="type">Facade</span> <span class="keyword">for</span> <span class="number">1698576962</span>) : <span class="type">No</span> <span class="type">Delegate</span> <span class="built_in">set</span> : lost message:libpng error: <span class="type">Not</span> a <span class="type">PNG</span> file</div><div class="line"> <span class="type">FAILED</span></div><div class="line"></div><div class="line"><span class="type">FAILURE</span>: <span class="type">Build</span> failed <span class="keyword">with</span> an exception.</div></pre></td></tr></table></figure></p>
<p>碰到这个问题的时候，简直是坑，从字面意思上来看就是碰到了一个<em>非 PNG 文件</em>的错误，一时摸不着头脑。后来找到问题的原因是在 Eclipse 中你可以把一个<em>.jpg</em> 文件通过修改后缀的方式，改为<em>.png</em> 文件使用。但是， AS 中这样做是不被认可的。只能说资源文件的问题，大部分是两个标准的问题，AS 更加严苛，当然这也是好的。不过问题的关键是报错信息里没有给出来是哪一个资源文件。。。。解决方法是根据报错信息的工程 Module 去资源文件里找，双击图片，在右侧可以看到该图片实际上的格式，找出来不是 PNG 格式的图片转换一下就 OK 了。。。。</p>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/png-err.png" alt=""></p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&#123;....&#125;</span>/res/drawable-hdpi/bell_50.<span class="number">758620689655</span>px_1183394_easyicon.net.png: <span class="type">Error</span>: '.' <span class="keyword">is</span> <span class="keyword">not</span> a valid file-based resource name character: <span class="type">File</span>-based resource names must contain only lowercase a-z, <span class="number">0</span>-<span class="number">9</span>, <span class="keyword">or</span> underscore</div><div class="line">:nari.mip.console:mergeDebugResources <span class="type">FAILED</span></div><div class="line"></div><div class="line"><span class="type">FAILURE</span>: <span class="type">Build</span> failed <span class="keyword">with</span> an exception.</div></pre></td></tr></table></figure>
<p>这个问题比较简单，资源文件命名不合符 AS 的规范，改掉就OK了。。<br><br></p>
<h2 id="3-7、编译死机"><a href="#3-7、编译死机" class="headerlink" title="3.7、编译死机"></a>3.7、编译死机</h2><p><br><br>执行编译后，下面提示条停在 <code>Gradle Build Running</code> 就不动了，机器直接死机。。。。最后 <em>OOM</em> 了。。。基本上遇到的报错信息大概下面两种<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">:<span class="meta">&#123;....&#125;</span>: &#123;<span class="string">"kind"</span>:<span class="string">"error"</span>,<span class="string">"text"</span>:<span class="string">"UNEXPECTED TOP-LEVEL ERROR:"</span>,<span class="string">"sources"</span>:[&#123;&#125;]&#125;</div><div class="line"><span class="type">AGPBI</span>: &#123;<span class="string">"kind"</span>:<span class="string">"error"</span>,<span class="string">"text"</span>:<span class="string">"java.lang.OutOfMemoryError: **GC overhead limit exceeded**"</span>,<span class="string">"sources"</span>:[&#123;&#125;]&#125;</div></pre></td></tr></table></figure></p>
<p>可以在 <em>Users/{username}/.gradle/gradle.properties</em> 文件中添加这个参数：</p>
<blockquote>
<p>org.gradle.jvmargs=-XX:-UseGCOverheadLimit </p>
</blockquote>
<p>该问题可以参考 <a href="http://www.cnblogs.com/hucn/p/3572384.html" target="_blank" rel="external">java.lang.OutOfMemoryError：GC overhead limit exceeded填坑心得</a>。<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">AGPBI: &#123;<span class="string">"kind"</span>:<span class="string">"error"</span>,<span class="string">"text"</span>:<span class="string">"UNEXPECTED TOP-LEVEL ERROR:"</span>,<span class="string">"sources"</span>:[&#123;&#125;]&#125;</div><div class="line">AGPBI: &#123;<span class="string">"kind"</span>:<span class="string">"error"</span>,<span class="string">"text"</span>:<span class="string">"java.lang.OutOfMemoryError: Java heap space"</span>,<span class="string">"sources"</span>:[&#123;&#125;]&#125;</div><div class="line">AGPBI: &#123;<span class="string">"kind"</span>:<span class="string">"error"</span>,<span class="string">"text"</span>:<span class="string">"\tat com.android.dx.util.Bits.makeBitSet(Bits.java:38)"</span>,<span class="string">"sources"</span>:[&#123;&#125;]&#125;</div></pre></td></tr></table></figure></p>
<p>主要是修改 AS 的参数进行优化，增大运行内存。在 <em>Users/{username}/.gradle/gradle.properties</em> 文件中添加：</p>
<blockquote>
<p>org.gradle.daemon=true<br>org.gradle.jvmargs=-Xmx2048m -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8<br>org.gradle.parallel=true<br>org.gradle.configureondemand=true</p>
</blockquote>
<p>第一个是开启守护进程，第二个是更改 jvm 的参数，第三个是开启并行任务，第四个是按需配置开关。关于优化的问题可以参考下面这个文章 <a href="http://blog.csdn.net/cswhale/article/details/51028242" target="_blank" rel="external">Android Studio 运行、编译卡死的解决办法</a>。<br><br></p>
<h2 id="3-8、jar包冲突"><a href="#3-8、jar包冲突" class="headerlink" title="3.8、jar包冲突"></a>3.8、jar包冲突</h2><p><br><br>项目之前用的是 Eclipse，用到了一些 github 上的第三方库，不过是用引用 jar包的方式，转到 AS 的过程中，这些文件都放在各个 lib 工程下的<em>libs</em> 文件目录中去了，而每个 lib 工程的<em>build.gradle</em> 文件都有这么一句：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">	<span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>:<span class="string">'*.jar'</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>因为项目中有自己的 jar 包和第三方的 jar 包，并且各个 lib 工程应用的 jar 包有重复，sync 的时候不会报错，但是生成 apk 的时候就会报出问题：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; Execution failed <span class="keyword">for</span> task <span class="string">':&#123;...&#125;:transformResourcesWithMergeJavaResForDebug'</span>.</div><div class="line">&gt; com<span class="selector-class">.android</span><span class="selector-class">.build</span><span class="selector-class">.api</span><span class="selector-class">.transform</span><span class="selector-class">.TransformException</span>: com<span class="selector-class">.android</span><span class="selector-class">.builder</span><span class="selector-class">.packaging</span><span class="selector-class">.DuplicateFileException</span>: Duplicate files copied <span class="keyword">in</span> APK META-INF/maven/com.alibaba/fastjson/pom.properties</div></pre></td></tr></table></figure></p>
<p>，或者报引用我们自己的核心业务 jar 包冲突的报错（因为核心业务比较敏感，只能提供 jar 包方式），类似：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">....Lxxxxx.xxx.xx alread added.....</div></pre></td></tr></table></figure></p>
<p>解决方法，有下面三个：</p>
<ul>
<li>方式一：创建 jar Module</li>
</ul>
<p>新建一个 Module，如下图，选择 <em>Import .JAR/.AAR Package</em> 的方式</p>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/jar-module.png" alt=""></p>
<p>然后在需要引用的地方，在其 <em>build.gradle</em> 文件中添加依赖：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">	<span class="keyword">compile</span> <span class="keyword">project</span>（<span class="string">'：&#123;project name&#125;'</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<ul>
<li>方式二：provided 方式</li>
</ul>
<p>我们打开 <em>Project Structure</em> 对话框，然后在 <em>Dependencies</em> 选项卡，在下拉菜单中可以看到这样的几项：</p>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/dependencies.png" alt=""></p>
<p>主要讲两种，一种是 <em>compile</em>，一种是 <em>provided</em>。前者是参与编译并在生成 apk 时打入包；而后一种则是只在编译时引用，但并不打入 apk 中。而我们的 jar 包冲突就是因为在生成 apk 的时候检测到有多个重复的 jar 包造成的。因为多个 lib 工程都用到了自己的核心业务 jar 包和第三方 jar 包，而且是 <em>compile</em> 的方式，自然就会出问题了。</p>
<p>解决方式就是，假如一个 jar 包被多次引用依赖，其中一个使用 <em>compile</em>，其他都使用 <em>provided</em>。特别注意的是要去掉 <em>compile fileTree(dir: ‘libs’, include:’</em>.jar’)<em> 这一句，它会把 </em>libs<em> 目录下的所有 jar 包以 </em>compile<em> 方式引用。我的方式是，把需要打入到 apk 中的所有 jar 包都放在 </em>libs<em> 目录下，在 </em>build.gradle* 中使用：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">	<span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>:<span class="string">'*.jar'</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>而在其他的 lib 工程中，把自己编译时需要的 jar 包放在 <em>libs</em> 目录下，在 <em>build.gradle</em> 使用：<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">dependencies &#123;</div><div class="line">	provided <span class="keyword">files</span>(<span class="string">'libs/xxx.xxx.xx1.jar'</span>)</div><div class="line">	provided <span class="keyword">files</span>(<span class="string">'libs/xxx.xxx.xx2.jar'</span>)</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>其他的方式可以参考这个：<a href="http://blog.csdn.net/u013134391/article/details/51538511" target="_blank" rel="external">AndroidStudio中多个Module依赖同一个jar的解决方案</a></p>
<ul>
<li>方式三：上传 maven 库</li>
</ul>
<p>这种是最麻烦（对于本项目来讲的话，核心业务 jar 包比较少）的方式了，一开始想到的是按照类似 v4 包这样的思路，因为在 Eclipse 项目中，lib 工程的<em>libs</em> 目录中是有 v4 包的，因此，当你迁移到 AS 上来的时候 v4 包实际上也存在冲突的问题，那么一般的解决方法是对其进行用下面的引用依赖方式：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">	<span class="keyword">compile</span> <span class="string">'com.android.support:support-v4:21.+'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这样的方式是不会出现冲突的问题的，还有就是用这种方式引用的其他第三方包，一般 jar 包来自 <em>sdk</em> 或者是<em>Users/{username}/.gradle/caches</em> 下面的缓存（没有的就从网络下载），另外就是<em>gradle</em> 可以使用本地<em>maven</em> 库，如果你本机没有存在的<em>maven</em> 库，默认的位置是<em>Users/{username}/.m2/repository</em>，但是直接把 jar 包放在这些目录下面是不行的，因为除了 jar 包，还有其他的一大堆文件。万幸的是，我们可以编写 gradle <em>upload</em> task 来上传到本地库（当然也可以上传到远程库），然后以上面的这种方式引用。</p>
<p>首先，将自己的核心业务 jar 包源码单独放到一个 Module 工程里去，然后配置 <em>maven</em> 库地址：<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class">repositories </span>&#123;</div><div class="line">    mavenCentral()</div><div class="line">    <span class="class">maven </span>&#123; url <span class="string">"maven respository URL"</span> &#125;<span class="comment">//依个人情况而定</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>添加 <em>maven</em> 发布插件:<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">apply <span class="string">plugin:</span> <span class="string">'maven-publish'</span></div><div class="line">apply <span class="string">plugin:</span> <span class="string">'maven'</span></div></pre></td></tr></table></figure></p>
<p>定义属性以及上传目标仓库地址:<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">MAVEN_LOCAL_PATH</span></span> =<span class="string">'$(your private maven repository URL)'</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">ARTIFACT_ID</span></span> = <span class="string">'xxx'</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">VERSION_NAME</span></span> = <span class="string">'1.0.0-SNAPSHOT'</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">GROUP_ID</span></span> = <span class="string">'xxx.xx'</span></div></pre></td></tr></table></figure></p>
<p>最后，在其 <em>build.gradle</em> 文件中编写 <em>upload</em> 部分：<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">uploadArchives &#123;</div><div class="line">    repositories &#123;</div><div class="line">        mavenDeployer &#123;</div><div class="line">            repository(url:MAVEN_LOCAL_PATH )&#123;</div><div class="line">				//这里，我们上传到本地库</div><div class="line">                //authentication(userName: “$(user_name)”, password:“$(passport)”)</div><div class="line">            &#125;</div><div class="line">        pom.project &#123;</div><div class="line">        groupId GROUP_ID</div><div class="line">        artifactId ARTIFACT_ID</div><div class="line">        version VERSION_NAME</div><div class="line">        packaging <span class="string">'aar'</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p> sync一下，会看到出现 <em>upload</em> 任务。最后，双击执行该任务：</p>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/upload-task.png" alt=""></p>
<p>最后，按照引用 v4 包的方式进行引用依赖就 OK 了~~<br><br></p>
<h2 id="3-9、Note-Warning"><a href="#3-9、Note-Warning" class="headerlink" title="3.9、Note/Warning"></a>3.9、Note/Warning</h2><p><br><br>其他的是一些 <em>Note/Warning</em> ，主要是 <em>Permission</em> 重复的警告信息，手动修改或者忽略。。。<br><br></p>
<h1 id="4、其他"><a href="#4、其他" class="headerlink" title="4、其他"></a>4、其他</h1><p><br><br>另外，可能是我们项目中的问题了，因为原来的一些 App 中的模块，比如<em>消息</em>、<em>新闻</em> 等等的，都是单独的 lib 工程，转到 AS 中成了一个个 Module 了，这样的后果就是编译一次非常的慢，比在 Eclipse 中还慢，你敢想象吗。。。。。造成的原因是因为 Module 太多了，造成 gradle 的 task list 非常多，每一个都非常的耗时。你可以打开你的 <em>Gradle Projects</em> 看一下，下图是 <em>Phoenix</em> 的 task list 的一部分：</p>
<p><img src="http://ofdub8np7.bkt.clouddn.com/2016/11/02/gradle-tasks.png" alt=""></p>
<p>除了 <em>root</em> ，每一个 Module 都会有一堆的 task 来执行，如果你只有一两个  Module 可能还没有什么，假如你有十几个的时候，你想一下。。。。<br>所以，尽量还是减少无谓的多个 Module 的方式对代码进行分块了。。<br><br></p>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Android/" rel="tag">#Android</a>
          
            <a href="/tags/Gradle/" rel="tag">#Gradle</a>
          
            <a href="/tags/Android-Studio/" rel="tag">#Android Studio</a>
          
            <a href="/tags/Eclipse/" rel="tag">#Eclipse</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/12/23/Android-Studio日常：使用aar以及style中使用自定义控件属性/" rel="prev">Android Studio日常：本地仓库引用方式使用 aar 以及 style 中使用自定义控件属性</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/20/『旅程的起点』/" rel="next">『旅程的起点』</a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div>
      
        <style type="text/css">

    .donate_bar {
        text-align: center;
        margin-top : 5%;
    }

    .donate_bar.hidden {
        display:none;
    }
/*
    .donate_bar a.btn_donate {
        display: inline-block;
        width: 82px;
        height: 82px;
        margin-left:auto;
        margin-right:auto;

        background: url("http://img.t.sinajs.cn/t5/style/images/apps_PRF/e_media/btn_reward.gif") no-repeat;
        _background: url("http://img.t.sinajs.cn/t5/style/images/apps_PRF/e_media/btn_reward.gif") no-repeat; 

        -webkit-transition: background 0s;
        -moz-transition: background 0s;
        -o-transition: background 0s;
        -ms-transition: background 0s;
        transition: background 0s;
    }
*/
    .donate_bar a.btn_donate:hover { 
        // background-position: 0px -82px;
        color: #87daff
    }

    .donate_bar .donate_txt {
        display: block;
        color: #9d9d9d;
        font: 14px/2 "Microsoft Yahei";
    }

    .bold { 
        font-weight: bold; 
    }

    .post-donate a {
        border-bottom: 0px;
    }

    #donate_guide table {
        border: none;
    }

    #donate_guide td {
        border-bottom: none;
        border-right: none;
        background: #333333;
        valign: top;
    }

</style>



    

    <div class ="post-donate">
        <div id="donate_board" class="donate_bar center">
              <a id="btn_donate" class="btn_donate" href="javascript:;" title="打赏">赏</a>
              <span id="donate_txt" class="donate_txt">
                   
                        请我喝杯茶
                   
              </span>
            <br>
        </div>  
  
        <div id="donate_guide" class="donate_bar center hidden">
            <!--
            
                <a href="http://ofdub8np7.bkt.clouddn.com/pay/alipay.png" title="支付宝打赏" class="fancybox" rel="article0" 
                    style="float:left;margin-left:25%;margin-right:10px;">
                    <img src="http://ofdub8np7.bkt.clouddn.com/pay/alipay.png" title="" height="164px" width="164px">
                </a> 
              

            
                <a href="http://ofdub8np7.bkt.clouddn.com/pay/wechat.png" title="微信打赏" class="fancybox" rel="article0"
                    style="margin-right:30%">
                    <img src="http://ofdub8np7.bkt.clouddn.com/pay/wechat.png" title="" height="164px" width="164px">
                </a>
            
            -->
            <table>
                <tr>
                    <td>
                        
                            <a href="http://ofdub8np7.bkt.clouddn.com/pay/alipay.png" title="支付宝打赏" class="fancybox" rel="article0" 
                                style="float:left;margin-left:25%;margin-right:10px;">
                                <img src="http://ofdub8np7.bkt.clouddn.com/pay/alipay.png" title="" height="164px" width="164px">
                            </a> 
                         
                    </td>
                    <td>
                        
                            <a href="http://ofdub8np7.bkt.clouddn.com/pay/wechat.png" title="微信打赏" class="fancybox" rel="article0"
                                style="margin-right:30%">
                                <img src="http://ofdub8np7.bkt.clouddn.com/pay/wechat.png" title="" height="164px" width="164px">
                            </a>
                        
                    </td>
                </tr>
            </table>

        </div>

        <script type="text/javascript">
            document.getElementById('btn_donate').onclick = function() {
                $('#donate_board').addClass('hidden');
                // $('#donate_guide').removeClass('hidden');
                $('#donate_guide').show(2000);
            }

        </script>
    </div>

    


      
    </div>

    <div class="post-spread">
      
    </div>
  </div>

 </div>

        

        
          <div class="comments" id="comments">
            
              <div class="ds-thread" data-thread-key="2016/11/02/Eclipse项目转Android-Studio的一些问题/"
                   data-title="Eclipse项目转Android Studio碰到的一些问题" data-url="http://whtacm.cc/2016/11/02/Eclipse项目转Android-Studio的一些问题/">
              </div>
            
          </div>
        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="Robin" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Robin</p>
        </div>
        <p class="site-description motion-element" itemprop="description">醉卧塌上看风轻云淡，漫卷诗书听雨打芭蕉</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">16</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">14</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">24</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="menu-item-icon icon-next-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/whtacm" target="_blank">GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="whtacm@gmail.com" target="_blank">Gmail</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="364432355" target="_blank">QQ</a>
              </span>
            
          
        </div>

        <div class="links-of-friendly motion-element">
          
            <p class="site-author-name">Links</p>
            
              <span class="links-of-author-item">
              <a href="https://hexo.io/" target="_blank">Hexo</a>
              </span>
            
              <span class="links-of-author-item">
              <a href="http://theme-next.iissnan.com/getting-started.html" target="_blank">NexT</a>
              </span>
            
          
        </div>

        
        

      </section>

      
        <section class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1、Eclipse导出项目"><span class="nav-number">1.</span> <span class="nav-text">1、Eclipse导出项目</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2、导入Android-Studio"><span class="nav-number">2.</span> <span class="nav-text">2、导入Android Studio</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3、问题列表（Issue-list）"><span class="nav-number">3.</span> <span class="nav-text">3、问题列表（Issue list）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1、Gradle-和-Android-Plugin-版本"><span class="nav-number">3.1.</span> <span class="nav-text">3.1、Gradle 和 Android Plugin 版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2、配置合适的-buildToolsVersion"><span class="nav-number">3.2.</span> <span class="nav-text">3.2、配置合适的 buildToolsVersion</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3、找不到-Java-类"><span class="nav-number">3.3.</span> <span class="nav-text">3.3、找不到 Java 类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4、AndroidManifest-xml-文件合并"><span class="nav-number">3.4.</span> <span class="nav-text">3.4、AndroidManifest.xml 文件合并</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5、-9-资源文件"><span class="nav-number">3.5.</span> <span class="nav-text">3.5、.9 资源文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6、-PNG-资源文件"><span class="nav-number">3.6.</span> <span class="nav-text">3.6、 PNG 资源文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-7、编译死机"><span class="nav-number">3.7.</span> <span class="nav-text">3.7、编译死机</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-8、jar包冲突"><span class="nav-number">3.8.</span> <span class="nav-text">3.8、jar包冲突</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-9、Note-Warning"><span class="nav-number">3.9.</span> <span class="nav-text">3.9、Note/Warning</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4、其他"><span class="nav-number">4.</span> <span class="nav-text">4、其他</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </section>
      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp;  2016 - 
  <span itemprop="copyrightYear">2021
  </span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Robin
  </span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme by <a class="theme-link" href="http://whtacm.cc">Robin</a>.<a class="theme-link" href="https://github.com/whtacm/hexo-theme-next/tree/magiclamp">Mala</a>
</div>

<!-- busuanzi -->

  <div class="busuanzi-info">
    <div class="theme-info">
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
    </script>
    <span id="busuanzi_container_site_pv">
        本站总访问量<a class="theme-link"><span id="busuanzi_value_site_pv"></span></a>次
    </span>
</div>
  </div>



 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"whtacm"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    

    
  
  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/lib/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.1" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 0.4 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    var $tocContent = $('.post-toc-content');
    if (isDesktop() && CONFIG.sidebar === 'post') {
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
        displaySidebar();
      }
    }
  });
</script>



  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
